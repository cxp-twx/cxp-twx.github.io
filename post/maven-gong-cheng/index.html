<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Maven工程 | CheckChen</title>
<meta name="description" content="吾日三省吾身" />
<link rel="shortcut icon" href="https://cxp-twx.github.io/favicon.ico?v=1576205079785">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://cxp-twx.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://cxp-twx.github.io">
  <img class="avatar" src="https://cxp-twx.github.io/images/avatar.png?v=1576205079785" alt="">
  </a>
  <h1 class="site-title">
    CheckChen
  </h1>
  <p class="site-description">
    吾日三省吾身
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Maven工程
            </h2>
            <div class="post-info">
              <span>
                2017-08-18
              </span>
              <span>
                9 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h1 id="maven">Maven</h1>
<h2 id="maven是什么">Maven是什么？</h2>
<blockquote>
<p>Maven 翻译为&quot;专家&quot;、&quot;内行&quot;，是 Apache 下的一个纯 Java 开发的开源项目。基于项目对象模型（缩写：POM）概念，Maven利用一个中央信息片断能管理一个项目的构建、报告和文档等步骤。</p>
</blockquote>
<blockquote>
<p>Maven 是一个项目管理工具，可以对 Java 项目进行构建、依赖管理。</p>
</blockquote>
<blockquote>
<p>Maven 也可被用于构建和管理各种项目，例如 C#，Ruby，Scala 和其他语言编写的项目。Maven 曾是 Jakarta 项目的子项目，现为由 Apache 软件基金会主持的独立 Apache 项目。</p>
</blockquote>
<h2 id="为什么要使用maven">为什么要使用Maven?</h2>
<p>Java开发中往往除了核心的JDK之外，我们还要用到大量的第三方jar包，尤其是我们在使用第三方框架开发时，框架本身又要依赖一堆第三方jar包，这些第三方jar包有可能还会依赖别的jar包。我们再手动处理这些依赖时往往效率低下，很头疼。</p>
<p>maven可以很好的解决上面的问题，它能够自动处理级联依赖，还有依赖之间版本兼容问题。</p>
<h2 id="什么场合下会用到maven">什么场合下会用到maven?</h2>
<p>当我们的项目中依赖的第三方jar包很多，关系很复杂时，靠我们手工来处理几乎不可能，那么这种情况下，maven就非常适合了。</p>
<h2 id="怎么使用maven">怎么使用Maven？</h2>
<h3 id="maven下载-安装">maven下载、安装</h3>
<ul>
<li>
<p>maven下载</p>
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-o2bzW4sH-1571359642734)(maven_download.png)]</p>
</li>
<li>
<p>maven安装</p>
<p>把上面下载下来的zip包解压到你喜欢的路径下， 最好不要有中文、空格。</p>
</li>
<li>
<p>环境变量配置</p>
<p>将mvn加压后的bin目录的路径添加到系统的Path环境变量中。</p>
</li>
<li>
<p>在IDE中配置maven</p>
<ul>
<li>eclipse中</li>
<li>IDEA中</li>
</ul>
</li>
</ul>
<h3 id="maven仓库">maven仓库</h3>
<ul>
<li>
<p>中央仓库</p>
<p>maven默认的一个远程仓库。可以理解为是一个特殊的远程仓库。</p>
</li>
<li>
<p>远程仓库</p>
<p>当首次运行maven项目时，本地仓库中空空如也，maven需要有一个地方下载我们项目中需要的所有依赖包，这个地方就是远程仓库。 一般是各个公司内部会搭建一套远程仓库</p>
</li>
<li>
<p>本地仓库</p>
<p>Windows系统，本地仓库默认路径是用户下面的.m2目录下的repository目录，如：C:\Users\John.m2\repository</p>
<p>本地仓库的作用是将maven联网下载的jar包做缓存，下次用到同样的jar包就优先使用本地仓库中的jar包，不会再次联网下载。</p>
</li>
</ul>
<h4 id="配置阿里云镜像">配置阿里云镜像</h4>
<p>配置阿里云镜像有两种方式： 修改全局配置文件或者项目中pom.xml</p>
<ul>
<li>
<p>第一种方式：修改全局配置</p>
<p>在maven安装目录下的conf目录下，找到settings.xml，在<mirrors>标签下添加如下内容：</p>
<pre><code class="language-xml">&lt;mirror&gt;
    &lt;id&gt;nexus&lt;/id&gt;
    &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; 
    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
&lt;/mirror&gt;
</code></pre>
</li>
<li>
<p>第二种方式： 修改项目的pom.xml，在其中添加</p>
<pre><code class="language-xml">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;alimaven&lt;/id&gt;  
        &lt;name&gt;aliyun maven&lt;/name&gt;  
        &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;  
        &lt;releases&gt;  
            &lt;enabled&gt;true&lt;/enabled&gt;  
        &lt;/releases&gt;  
        &lt;snapshots&gt;  
            &lt;enabled&gt;false&lt;/enabled&gt;  
        &lt;/snapshots&gt;  
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>
</li>
</ul>
<h3 id="maven构建的生命周期">maven构建的生命周期</h3>
<ul>
<li>
<h4 id="clean">clean</h4>
<p>清理工程编译生成的文件</p>
</li>
<li>
<p>validate</p>
</li>
<li>
<h4 id="compile">compile</h4>
<p>编译工程</p>
</li>
<li>
<p>test</p>
</li>
<li>
<h4 id="package">package</h4>
<p>打包工程，一般打包格式包括jar、war两种</p>
</li>
<li>
<p>verify</p>
</li>
<li>
<h4 id="install">install</h4>
<p>将maven工程打包，并安装到本地maven仓库</p>
</li>
<li>
<p>site</p>
</li>
<li>
<p>delpoy</p>
</li>
</ul>
<blockquote>
<p>构建周期使用特点：当执行后面的周期时，maven会自动将前面的周期先执行。如执行install周期，实际上maven会先执行compile，再执行package，然后才是install</p>
</blockquote>
<h3 id="执行maven构建周期">执行maven构建周期</h3>
<p>语法：</p>
<pre><code>mvn 构建周期名称 [-D参数=参数值]
</code></pre>
<p>如：</p>
<p>清理编译路径</p>
<pre><code>mvn clean
</code></pre>
<p>打包并忽略单元测试</p>
<pre><code>mvn package -Dmaven.test.skip=true
</code></pre>
<p>多个构建周期可以一起使用，如下面的清理并打包一起执行</p>
<pre><code>mvn clean package
</code></pre>
<h3 id="maven中配置文件的级别">Maven中配置文件的级别</h3>
<ul>
<li>全局配置文件： %maven_home%/conf/settings.xml</li>
<li>用户级别的配置文件：C:\Users\John\.m2\settings.xml</li>
<li>项目级别配置文件： 项目根路径下的pom.xml</li>
</ul>
<h3 id="pom文件">POM文件</h3>
<p>在maven工程中有一个很重要的配置文件，pom.xml。这个文件记载了整个工程依赖的所有第三方jar包，和工程中模块的依赖情况。</p>
<p>我们经常需要打交道的就是这个pom.xml文件。</p>
<h4 id="maven工程三要素">maven工程三要素</h4>
<ul>
<li>groupId :  组织id</li>
<li>artifactId: 项目的名字</li>
<li>version： 版本号</li>
</ul>
<p>maven工程的三要素决定了我们再添加依赖时，唯一定位到一个jar包。</p>
<h4 id="指定打包方式">指定打包方式</h4>
<p>通过packaging标签指定: 一般常用的值包括：jar、war</p>
<pre><code class="language-xml">&lt;packaging&gt;jar&lt;/packaging&gt;
</code></pre>
<h3 id="maven中的properties">Maven中的Properties</h3>
<p>maven中的properties标签有两种</p>
<ul>
<li>
<p>自定义属性</p>
<p>通常用来统一管理版本，在 &lt; dependencies &gt; 标签中配置依赖时可以通过${自定义属性}来引用&lt;properties&gt;标签中定义的属性</p>
<pre><code class="language-xml"> &lt;properties&gt;
	&lt;junit.version&gt;4.12&lt;/junit.version&gt;
  &lt;/properties&gt;

 &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;${junit.version}&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>
<p>内置属性</p>
<p>内置属性的定义方式和自定义属性一样，但是不需要我们显示去使用，maven会自动读取。通常用来指定项目编码、编译版本等</p>
<pre><code class="language-xml">&lt;properties&gt;
  	&lt;!-- 指定源代码文件的编码 --&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;!-- 指定测试报告输出编码 --&gt;
    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
    &lt;!-- 编译时的编码 --&gt;
	&lt;maven.compiler.encoding&gt;UTF-8&lt;/maven.compiler.encoding&gt;
    
    &lt;!-- 设置编译版本 --&gt;
    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
	&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;
&lt;/properties&gt;

</code></pre>
</li>
</ul>
<h3 id="依赖管理">依赖管理</h3>
<p>在maven的pom.xml中，依赖的管理通过<denpendencies>标签来管理，该标签下可以出现一个或多个<denpendency>子标签。</p>
<p>一个<denpendency>标签代表一个依赖。</p>
<p>具体来说配置方式：</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!-- 添加c3p0依赖 --&gt;
    &lt;dependency&gt;
    	&lt;groupId&gt;com.mchange&lt;/groupId&gt;
    	&lt;artifactId&gt;c3p0&lt;/artifactId&gt;
    	&lt;version&gt;0.9.5.2&lt;/version&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;

</code></pre>
<blockquote>
<p>我们添加完上面的配置以后，maven会将c3p0及相关的依赖自动添加到项目的构建路径下</p>
</blockquote>
<h3 id="maven中依赖的scope">maven中依赖的Scope</h3>
<p>maven中的scope有：</p>
<ul>
<li>test</li>
<li>compile(默认)</li>
<li>runtime</li>
<li>provided</li>
<li>system</li>
<li>import</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">范围</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">compile</td>
<td style="text-align:left">该范围表明相关依赖是只在项目的类路径下有效。<span style="font-weight:bold;">默认取值</span>。</td>
</tr>
<tr>
<td style="text-align:left">provided</td>
<td style="text-align:left">该范围表明相关依赖是由运行时的 JDK 或者 网络服务器提供的。</td>
</tr>
<tr>
<td style="text-align:left">runtime</td>
<td style="text-align:left">该范围表明相关依赖在编译阶段不是必须的，但是在执行阶段是必须的。</td>
</tr>
<tr>
<td style="text-align:left">test</td>
<td style="text-align:left">该范围表明相关依赖只在测试编译阶段和执行阶段。</td>
</tr>
<tr>
<td style="text-align:left">system</td>
<td style="text-align:left">该范围表明你需要提供一个系统路径。</td>
</tr>
<tr>
<td style="text-align:left">import</td>
<td style="text-align:left">该范围只在依赖是一个 pom 里定义的依赖时使用。同时，当前项目的POM 文件的 部分定义的依赖关系可以取代某特定的 POM。</td>
</tr>
</tbody>
</table>
<h2 id="在eclipse中新建maven工程">在Eclipse中新建maven工程</h2>
<ol>
<li>新建工程选择maven project</li>
<li>选择项目骨架模板
<ol>
<li>JavaSE工程建议选择maven-archetype-quickstart</li>
<li>JavaWeb工程建议选择maven-archetype-webapp</li>
</ol>
</li>
<li>填写项目三要素： groupId、artifactId、version</li>
<li>Finish</li>
</ol>
<h3 id="maven的目录结构">Maven的目录结构</h3>
<ul>
<li>
<p>JavaSE</p>
<pre><code class="language-java">maven_test			// 项目文件夹(根目录)
	src				
		main
			resources	// 存放配置文件
			java	// 此处放Java源代码
		test
			resources	// 存放单元测试配置文件
			java	// 此处放单元测试源代码
	target			// 此处存放maven编译、打包生成的文件
pom.xml				// 核心配置文件

</code></pre>
</li>
<li>
<p>JavaWeb</p>
<pre><code class="language-java">maven_test			// 项目文件夹(根目录)
	src				
		main
			resources	// 存放配置文件
			java	// 此处放Java源代码
			webapp	// web工程部署根目录
				WEB-INF
					web.xml
				xxx.jsp
				xxx.html
				static	// 只是示范，不是maven标准目录结构
					js
						xx.js
					css
						xx.css
		test
			resources	// 存放单元测试配置文件
			java	// 此处放单元测试源代码
	target			// 此处存放maven编译、打包生成的文件
pom.xml				// 核心配置文件

</code></pre>
</li>
</ul>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#maven">Maven</a>
<ul>
<li><a href="#maven%E6%98%AF%E4%BB%80%E4%B9%88">Maven是什么？</a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8maven">为什么要使用Maven?</a></li>
<li><a href="#%E4%BB%80%E4%B9%88%E5%9C%BA%E5%90%88%E4%B8%8B%E4%BC%9A%E7%94%A8%E5%88%B0maven">什么场合下会用到maven?</a></li>
<li><a href="#%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8maven">怎么使用Maven？</a>
<ul>
<li><a href="#maven%E4%B8%8B%E8%BD%BD-%E5%AE%89%E8%A3%85">maven下载、安装</a></li>
<li><a href="#maven%E4%BB%93%E5%BA%93">maven仓库</a>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F">配置阿里云镜像</a></li>
</ul>
</li>
<li><a href="#maven%E6%9E%84%E5%BB%BA%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">maven构建的生命周期</a>
<ul>
<li><a href="#clean">clean</a></li>
<li><a href="#compile">compile</a></li>
<li><a href="#package">package</a></li>
<li><a href="#install">install</a></li>
</ul>
</li>
<li><a href="#%E6%89%A7%E8%A1%8Cmaven%E6%9E%84%E5%BB%BA%E5%91%A8%E6%9C%9F">执行maven构建周期</a></li>
<li><a href="#maven%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E7%BA%A7%E5%88%AB">Maven中配置文件的级别</a></li>
<li><a href="#pom%E6%96%87%E4%BB%B6">POM文件</a>
<ul>
<li><a href="#maven%E5%B7%A5%E7%A8%8B%E4%B8%89%E8%A6%81%E7%B4%A0">maven工程三要素</a></li>
<li><a href="#%E6%8C%87%E5%AE%9A%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F">指定打包方式</a></li>
</ul>
</li>
<li><a href="#maven%E4%B8%AD%E7%9A%84properties">Maven中的Properties</a></li>
<li><a href="#%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86">依赖管理</a></li>
<li><a href="#maven%E4%B8%AD%E4%BE%9D%E8%B5%96%E7%9A%84scope">maven中依赖的Scope</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8eclipse%E4%B8%AD%E6%96%B0%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B">在Eclipse中新建maven工程</a>
<ul>
<li><a href="#maven%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">Maven的目录结构</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://cxp-twx.github.io/post/web-hui-gu">
              <h3 class="post-title">
                web回顾
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '3818ab196008bdc444d2',
    clientSecret: '25a6a1be783a52e1a00f165dd3c08fa28fba507a',
    repo: 'cxp-twx.github.io',
    owner: 'cxp-twx',
    admin: ['cxp-twx'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://cxp-twx.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
